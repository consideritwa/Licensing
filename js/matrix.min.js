function searchKeyUp(){TriggerSearch=!0}function applySearch(){const e=document.getElementById("feature-search").value.toUpperCase();let t=!1;const n=document.querySelectorAll("tr");for(const o of n){const n=-1!==o.className.indexOf("sticky-row");if(n)t=!1;else{const n=o.getElementsByTagName("td")[0];if(n){t&&-1==n.className.indexOf("indent")&&(t=!1);const c=n.textContent||n.innerText;c.toUpperCase().includes(e)||t?(o.style.display="table-row",-1!==n.className.indexOf("group")&&(t=!0)):o.style.display="none"}}}}function searchTimer(){TriggerSearch&&(TriggerSearch=!1,applySearch())}function setupFeatureSearch(){document.getElementById("feature-search").addEventListener("keyup",searchKeyUp)}function countInGroup(e,t){let n=0,o=0;for(let c=0;c<DIAGRAM_GROUPS.length;c+=1){if(c===e){const e=o+DIAGRAM_GROUPS[c];for(let c=o;c<e;c+=1)t[c]&&(n+=1);return n}o+=DIAGRAM_GROUPS[c]}return-1}function getSelectedCheckboxes(){const e=new Array(DIAGRAM_COUNT),t=document.querySelectorAll("input[type=checkbox]");for(const n of t)e[n.value]=n.checked;return e}function setSelectedCheckboxes(e){const t=document.querySelectorAll("input[type=checkbox]");for(const n of t)n.checked=e[n.value]}function findGroup(e,t){let n=0;for(let o=0;o<t.length;o+=1)if(n+=t[o],e<n)return o;return-1}function showColumns(e){const t=e.every(e=>!e),n=[],o=document.querySelectorAll("tr");for(let c=0;c<o.length;c+=1){const l=o[c];let a=!1,s=null;if(0===c){s=l.getElementsByTagName("th");let t=!0;for(let o=1;o<s.length;o+=1){const c=s[o],l=countInGroup(o-1,e);c.style.display=l>0?"table-cell":"none",c.setAttribute("colspan",l);const a=t?"group-a":"group-b";n.push(a),0!==l&&(c.className=a,t=!t)}}else{const o=-1!==l.className.indexOf("sticky-row-3");1===c||o?s=l.getElementsByTagName("th"):(s=l.getElementsByTagName("td"),a=!t),o&&(a=!1);for(let t=1;t<s.length;t+=1){const o=s[t];if(1===c){const e=findGroup(t-1,DIAGRAM_GROUPS),c=n[e];o.className=c}e[t-1]?(o.style.display="table-cell",""!==o.textContent&&(a=!1)):o.style.display="none"}l.style.display=a?"none":"table-row"}}""!==document.getElementById("feature-search").value&&applySearch()}function hashChanged(){const e=new Array(DIAGRAM_COUNT);e.fill(!0);let t=window.location.hash.substring(1);const n=Array.from(t).every(e=>"1"===e);if(!n&&(18===t.length&&(t=t[0]+"00"+t.slice(1,-4)+"0"+t.slice(-4)),t.length===DIAGRAM_COUNT))for(let n=0;n<t.length;n+=1)e[n]="1"===t[n];setSelectedCheckboxes(e),showColumns(e)}function checkboxChanged(){const e=getSelectedCheckboxes();let t="#";for(const n of e)t+=n?"1":"0";window.location.hash=t}function setupCheckboxes(){const e=document.querySelectorAll("input[type=checkbox]");for(const t of e)t.addEventListener("change",checkboxChanged)}function selectAll(){const e="#"+"1".repeat(DIAGRAM_COUNT);window.location.hash=e}function selectNone(){const e="#"+"0".repeat(DIAGRAM_COUNT);window.location.hash=e}function selectSave(){const e=getSelectedCheckboxes();let t="#";for(const n of e)t+=n?"1":"0";localStorage.setItem(StoreName.MatrixSelection,t),showModalDialog("Selection saved.<br/><br/>\n    When you return your selection will be applied automatically.",!1,void 0,"OK")}function setupSelectAllNoneSave(){document.getElementById("button-all").addEventListener("click",selectAll),document.getElementById("button-none").addEventListener("click",selectNone),document.getElementById("button-save").addEventListener("click",selectSave)}function applySavedSelectionHash(){if(""===window.location.hash){const e=localStorage.getItem(StoreName.MatrixSelection);e&&(window.location.hash=e)}}function DOMContentLoaded(){isEmbedded()&&(document.getElementById("menu").style.display="none"),setupModal(),setupSelectAllNoneSave(),setupFeatureSearch(),setupCheckboxes(),applySavedSelectionHash(),window.addEventListener("hashchange",hashChanged),""!==window.location.hash&&hashChanged()}function pageLoad(){document.getElementById("header").style.width=document.body.scrollWidth+"px",setInterval(searchTimer,250)}let TriggerSearch=!1;const DIAGRAM_COUNT=21,DIAGRAM_GROUPS=[3,3,5,4,6];document.addEventListener("DOMContentLoaded",DOMContentLoaded),window.addEventListener("load",pageLoad);